{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/components/GLSLCanvasContainer.vue?6300","webpack:///./src/App.vue?0978","webpack:///./src/components/Images.vue?df44","webpack:///src/components/Images.vue","webpack:///./src/components/Images.vue?1bf6","webpack:///./src/components/Images.vue","webpack:///./src/components/GLSLCanvasContainer.vue?5f28","webpack:///./src/components/GLSLCanvas.vue?8402","webpack:///src/components/GLSLCanvas.vue","webpack:///./src/components/GLSLCanvas.vue?236b","webpack:///./src/components/GLSLCanvas.vue","webpack:///src/components/GLSLCanvasContainer.vue","webpack:///./src/components/GLSLCanvasContainer.vue?c392","webpack:///./src/components/GLSLCanvasContainer.vue","webpack:///src/App.vue","webpack:///./src/App.vue?1160","webpack:///./src/App.vue","webpack:///./src/main.js","webpack:///./src/App.vue?995e","webpack:///./src/components/Images.vue?34db"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","_e","items","staticRenderFns","index","props","Array","mounted","setInterval","component","ref","canvasSize","vertexShader","fragmentShader","currentImage","canvasWidth","canvasHeight","components","size","type","required","String","quality","Number","default","activeExternalResources","gl","startTime","animationTimer","mouse","x","y","currentVertexShader","currentFragmentShader","currentProgram","frontTarget","backTarget","activeTextures","texturePromises","screenProgram","screenPositionAttributeLocation","v","f","methods","initGLSLCanvas","Date","now","initGL","compileScreenProgram","createRenderTargets","getExtension","console","log","getGL","canvas","getContext","preserveDrawingBuffer","animate","requestAnimationFrame","updateCanvas","width","height","stopAnimate","cancelAnimationFrame","forceCreateProgram","createProgram","updateTextures","useProgram","viewport","enable","CULL_FACE","DEPTH_TEST","bindBuffer","ARRAY_BUFFER","vbo","bufferData","enableVertexAttribArray","positionAttributeLocation","vertexAttribPointer","uniform2f","resolutionLocation","uniform1f","timeLocation","time","mouseLocation","uniform1i","backbufferLocation","activeTexture","TEXTURE0","bindTexture","TEXTURE_2D","texture","TEXTURE1","bindFramebuffer","FRAMEBUFFER","framebuffer","clearColor","clear","COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","drawArrays","TRIANGLES","positions","resolutionLocation2","textureLocation","tmp","createShader","shader","shaderSource","source","compileShader","success","getShaderInfoLog","errorLog","errors","errorLine","parseInt","match","message","FRAGMENT_SHADER","$emit","deleteShader","hasError","loadTextures","externalResource","loadTexture","loadBlankTexture","pixelStorei","UNPACK_FLIP_Y_WEBGL","texImage2D","url","image","crossOrigin","src","initalSize","program","attachShader","linkProgram","getProgramInfoLog","deleteProgram","createFramebufferTarget","createFramebuffer","renderbuffer","createRenderbuffer","createTexture","target","texParameteri","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","TEXTURE_MAG_FILTER","NEAREST","TEXTURE_MIN_FILTER","framebufferTexture2D","bindRenderbuffer","RENDERBUFFER","renderbufferStorage","framebufferRenderbuffer","vs","fs","getProgramParameter","LINK_STATUS","getAttribLocation","onMousemove","root","e","pageX","left","pageY","top","onWebglcontextlost","event","preventDefault","onWebglcontextrestored","computed","$refs","watch","addEventListener","beforeDestroy","removeEventListener","images","onWindowResized","VERTEX_SHADER_SOURCE","FRAGMENT_SHADER_SOURCE","glslCanvasContainer","clientWidth","clientHeight","fetchCount","Vue","config","productionTip","render","h","App","$mount"],"mappings":"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","file":"js/app.d18ef3a7.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GLSLCanvasContainer.vue?vue&type=style&index=0&id=2f5af11c&scoped=true&lang=stylus&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"app\",attrs:{\"id\":\"app\"}},[(false)?_c('Images',{attrs:{\"items\":_vm.items}}):_vm._e(),_c('GLSLCanvasContainer',{attrs:{\"images\":_vm.items}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"images\"},[_c('div',{staticClass:\"imageItem\"},[_c('img',{attrs:{\"src\":_vm.items[_vm.index]}})])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"images\">\n    <div class=\"imageItem\">\n      <img :src=\"items[index]\">\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'Images',\n  props: {\n    items: Array\n  },\n  data() {\n    return {\n      index: 0\n    }\n  },\n  mounted() {\n    setInterval(() => {\n      this.index++\n      if (this.index >= this.items.length) {\n        this.index = 0\n      }\n    }, 1000)\n  }\n}\n</script>\n\n<style scoped lang=\"stylus\">\n.images\n  .imageItem\n    img\n      position fixed\n      width 100%\n      height 100%\n      object-fit cover\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Images.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Images.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Images.vue?vue&type=template&id=0152c0c5&scoped=true&\"\nimport script from \"./Images.vue?vue&type=script&lang=js&\"\nexport * from \"./Images.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Images.vue?vue&type=style&index=0&id=0152c0c5&scoped=true&lang=stylus&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0152c0c5\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"glslCanvasContainer\",staticClass:\"glslCanvasContainer\"},[_c('GLSLCanvas',{attrs:{\"size\":_vm.canvasSize,\"vertex-shader\":_vm.vertexShader,\"fragment-shader\":_vm.fragmentShader,\"active-external-resources\":_vm.currentImage,\"quality\":2}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('canvas',{ref:\"canvas\",staticClass:\"glslCanvas\",attrs:{\"width\":_vm.canvasWidth,\"height\":_vm.canvasHeight}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <canvas\r\n    ref=\"canvas\"\r\n    class=\"glslCanvas\"\r\n    :width=\"canvasWidth\"\r\n    :height=\"canvasHeight\"\r\n  ></canvas>\r\n</template>\r\n\r\n<script>\r\n\r\nconst GLSL_ERROR_PATTERN = /^ERROR: \\d+:(\\d+):\\s(.*)$/gm;\r\n// const TIME_OFFSET: number = 5000;\r\n\r\nexport default {\r\n  name: 'GLSLCanvas',\r\n  components: {},\r\n  props: {\r\n    size: {\r\n      type: Object,\r\n      required: true\r\n    },\r\n    vertexShader: {\r\n      type: String,\r\n      required:true\r\n    },\r\n    fragmentShader: {\r\n      type: String,\r\n      required:true\r\n    },\r\n    quality: {\r\n      type: Number,\r\n      default:1\r\n    },\r\n    activeExternalResources: {\r\n      type: String,\r\n      default: \"\"\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      gl:  null,\r\n      startTime: 0,\r\n      animationTimer: 0,\r\n      mouse: {\r\n        x: 0,\r\n        y: 0\r\n      },\r\n      currentVertexShader: null,\r\n      currentFragmentShader: null,\r\n      currentProgram: null,\r\n      frontTarget: null,\r\n      backTarget: null,\r\n      activeTextures: [],\r\n      texturePromises: {},\r\n      screenProgram: null,\r\n      screenPositionAttributeLocation: 0,\r\n\r\n      v: `attribute vec3 position;\r\n        void main(){\r\n            gl_Position = vec4(position, 1.0);\r\n        }`,\r\n\r\n      f: `precision mediump float;\r\n        uniform vec2 resolution;\r\n        uniform sampler2D texture;\r\n        void main(){\r\n            vec2 uv = gl_FragCoord.xy / resolution.xy;\r\n            gl_FragColor = texture2D(texture, uv);\r\n        }`\r\n    }\r\n  },\r\n  methods: {\r\n    // createThumb: (size: number): Promise<string> {\r\n    //   return new Promise(\r\n    //     (resolve: (url: string) => void, reject: (err: string) => void) => {\r\n    //       const canvas: any = document.createElement(\"canvas\");\r\n    //       canvas.width = size;\r\n    //       canvas.height = size;\r\n    //       const gl = canvas.getContext(\"experimental-webgl\", {\r\n    //         preserveDrawingBuffer: true\r\n    //       });\r\n    //       this.startTime = Date.now() - TIME_OFFSET;\r\n    //       if (gl) {\r\n    //         this.initGL(gl);\r\n    //         this.updateCanvas(gl, true, {\r\n    //           width: size,\r\n    //           height: size\r\n    //         });\r\n    //       } else {\r\n    //         // eslint-disable-next-line prefer-promise-reject-errors\r\n    //         reject(\"\");\r\n    //         return;\r\n    //       }\r\n    //\r\n    //       if (this.texturePromises.length === 0) {\r\n    //         resolve(canvas.toDataURL(\"image/png\"));\r\n    //         return;\r\n    //       }\r\n    //\r\n    //       Promise.all(Object.values(this.texturePromises))\r\n    //         .then(_ => {\r\n    //           this.updateCanvas(gl, false, {\r\n    //             width: size,\r\n    //             height: size\r\n    //           });\r\n    //           resolve(canvas.toDataURL(\"image/png\"));\r\n    //           this.texturePromises = {};\r\n    //         })\r\n    //         .catch(error => {\r\n    //           reject(error);\r\n    //         });\r\n    //     }\r\n    //   );\r\n    // }\r\n\r\n    initGLSLCanvas() {\r\n      this.gl = null;\r\n      this.currentVertexShader = null;\r\n      this.currentFragmentShader = null;\r\n      this.currentProgram = null;\r\n      this.startTime = Date.now();\r\n\r\n      const gl = this.getGL();\r\n\r\n      this.initGL(gl);\r\n      this.compileScreenProgram(gl);\r\n      this.createRenderTargets(gl);\r\n    },\r\n    initGL(gl) {\r\n      if (!gl.getExtension(\"OES_standard_derivatives\")) {\r\n        console.log(\"OES_standard_derivatives is not supported.\");\r\n      }\r\n    },\r\n    getGL() {\r\n      if (!this.gl) {\r\n        this.gl = this.canvas.getContext(\"experimental-webgl\", {\r\n          preserveDrawingBuffer: true\r\n        })\r\n      }\r\n      return this.gl\r\n    },\r\n    animate() {\r\n      this.animationTimer = requestAnimationFrame(this.animate);\r\n\r\n      if (this.gl) {\r\n        this.updateCanvas(this.gl, false, {\r\n          width: this.canvasWidth,\r\n          height: this.canvasHeight\r\n        });\r\n      }\r\n    },\r\n    stopAnimate() {\r\n      if (this.animationTimer) {\r\n        cancelAnimationFrame(this.animationTimer);\r\n      }\r\n    },\r\n    updateCanvas(gl, forceCreateProgram = false, canvasSize) {\r\n      if (!this.currentProgram || forceCreateProgram) {\r\n        const vertexShaderSource = this.vertexShader;\r\n        const fragmentShaderSource = this.fragmentShader;\r\n        const vertexShader = this.createShader(\r\n          gl,\r\n          gl.VERTEX_SHADER,\r\n          vertexShaderSource\r\n        );\r\n        const fragmentShader = this.createShader(\r\n          gl,\r\n          gl.FRAGMENT_SHADER,\r\n          fragmentShaderSource\r\n        );\r\n\r\n        if (!vertexShader || !fragmentShader) {\r\n          // Could not compile program but never return here not to stop current shader.\r\n        } else {\r\n          this.currentVertexShader = vertexShader;\r\n          this.currentFragmentShader = fragmentShader;\r\n        }\r\n        if (this.currentVertexShader && this.currentFragmentShader) {\r\n          this.currentProgram = this.createProgram(\r\n            gl,\r\n            this.currentVertexShader,\r\n            this.currentFragmentShader\r\n          );\r\n        }\r\n        if (this.activeExternalResources) {\r\n          this.updateTextures(gl);\r\n        }\r\n\r\n        console.log(\"Program was created.\");\r\n      }\r\n\r\n      if (!this.frontTarget || !this.backTarget) {\r\n        return;\r\n      }\r\n      if (!this.currentProgram || !this.screenProgram) {\r\n        console.log(\"Program should not be null.\");\r\n        return;\r\n      }\r\n\r\n      gl.useProgram(this.currentProgram);\r\n\r\n      gl.viewport(0, 0, canvasSize.width, canvasSize.height);\r\n\r\n      gl.enable(gl.CULL_FACE);\r\n      gl.enable(gl.DEPTH_TEST);\r\n\r\n      const positions = [\r\n        -1.0,\r\n        -1.0,\r\n        1.0,\r\n        -1.0,\r\n        -1.0,\r\n        1.0,\r\n        1.0,\r\n        -1.0,\r\n        1.0,\r\n        1.0,\r\n        -1.0,\r\n        1.0\r\n      ];\r\n\r\n      // position\r\n      const vbo = gl.createBuffer();\r\n      gl.bindBuffer(gl.ARRAY_BUFFER, vbo);\r\n      gl.bufferData(\r\n        gl.ARRAY_BUFFER,\r\n        new Float32Array(positions),\r\n        gl.STATIC_DRAW\r\n      );\r\n\r\n      const positionAttributeLocation = gl.getAttribLocation(\r\n        this.currentProgram,\r\n        \"position\"\r\n      );\r\n      gl.enableVertexAttribArray(positionAttributeLocation);\r\n\r\n      const size = 2; // xy\r\n      const type = gl.FLOAT;\r\n      const normalize = false;\r\n      const stride = 0;\r\n      const offset = 0;\r\n      gl.vertexAttribPointer(\r\n        positionAttributeLocation,\r\n        size,\r\n        type,\r\n        normalize,\r\n        stride,\r\n        offset\r\n      );\r\n\r\n      // resolution\r\n      const resolutionLocation = gl.getUniformLocation(\r\n        this.currentProgram,\r\n        \"resolution\"\r\n      );\r\n      gl.uniform2f(resolutionLocation, canvasSize.width, canvasSize.height);\r\n\r\n      // time\r\n      const timeLocation = gl.getUniformLocation(this.currentProgram, \"time\");\r\n      const time = (Date.now() - this.startTime) / 1000;\r\n      gl.uniform1f(timeLocation, time);\r\n\r\n      // mouse\r\n      const mouseLocation = gl.getUniformLocation(\r\n        this.currentProgram,\r\n        \"mouse\"\r\n      );\r\n      gl.uniform2f(mouseLocation, this.mouse.x, this.mouse.y);\r\n\r\n      // backbuffer\r\n      const backbufferLocation = gl.getUniformLocation(\r\n        this.currentProgram,\r\n        \"backbuffer\"\r\n      );\r\n\r\n      gl.uniform1i(backbufferLocation, 0);\r\n      gl.activeTexture(gl.TEXTURE0);\r\n      gl.bindTexture(gl.TEXTURE_2D, this.backTarget.texture);\r\n\r\n      // textures\r\n      for (let i = 0; i < this.activeTextures.length; i++) {\r\n        const uniformName = `channel${i}`;\r\n        const textureLocation = gl.getUniformLocation(\r\n          this.currentProgram,\r\n          uniformName\r\n        );\r\n\r\n        const uniformSizeName = `channelSize${i}`;\r\n        const textureResolutionLocation = gl.getUniformLocation(\r\n          this.currentProgram,\r\n          uniformSizeName\r\n        );\r\n\r\n        const activeSize =\r\n          this.activeTextures[i].size === undefined\r\n            ? { width: 1, height: 1 }\r\n            : this.activeTextures[i].size;\r\n\r\n        gl.uniform2f(\r\n          textureResolutionLocation,\r\n          activeSize.width,\r\n          activeSize.height\r\n        );\r\n\r\n        gl.uniform1i(textureLocation, 1 + i);\r\n        gl.activeTexture(gl.TEXTURE1 + i);\r\n        gl.bindTexture(gl.TEXTURE_2D, this.activeTextures[i].texture);\r\n      }\r\n\r\n      gl.bindFramebuffer(gl.FRAMEBUFFER, this.frontTarget.framebuffer);\r\n\r\n      gl.clearColor(0, 0, 0, 0);\r\n      gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\r\n      gl.drawArrays(gl.TRIANGLES, 0, positions.length / 2);\r\n\r\n      gl.useProgram(this.screenProgram);\r\n\r\n      const resolutionLocation2 = gl.getUniformLocation(\r\n        this.screenProgram,\r\n        \"resolution\"\r\n      );\r\n      gl.uniform2f(resolutionLocation2, canvasSize.width, canvasSize.height);\r\n      const textureLocation = gl.getUniformLocation(\r\n        this.screenProgram,\r\n        \"texture\"\r\n      );\r\n      gl.uniform1i(textureLocation, 1);\r\n\r\n      gl.bindBuffer(gl.ARRAY_BUFFER, vbo);\r\n      gl.vertexAttribPointer(\r\n        this.screenPositionAttributeLocation,\r\n        2,\r\n        gl.FLOAT,\r\n        false,\r\n        0,\r\n        0\r\n      );\r\n\r\n      gl.activeTexture(gl.TEXTURE1);\r\n      gl.bindTexture(gl.TEXTURE_2D, this.frontTarget.texture);\r\n\r\n      gl.bindFramebuffer(gl.FRAMEBUFFER, null);\r\n      gl.clearColor(0, 0, 0, 0);\r\n      gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\r\n      gl.drawArrays(gl.TRIANGLES, 0, positions.length / 2);\r\n\r\n      // swap buffers\r\n      const tmp = this.frontTarget;\r\n      this.frontTarget = this.backTarget;\r\n      this.backTarget = tmp;\r\n\r\n      console.log(\"updateCanvas\");\r\n    },\r\n    createShader(gl, type, source) {\r\n      const shader = gl.createShader(type);\r\n      if (!shader) {\r\n        console.log(\"error: WebGLShader is null.\");\r\n        return null;\r\n      }\r\n      gl.shaderSource(shader, source);\r\n      gl.compileShader(shader);\r\n\r\n      const success = gl.getShaderParameter(shader, gl.COMPILE_STATUS);\r\n\r\n      if (!success) {\r\n        console.log(gl.getShaderInfoLog(shader));\r\n\r\n        const errorLog = gl.getShaderInfoLog(shader);\r\n\r\n        // Extract error messages from errorLog\r\n        const errors = [];\r\n        if (errorLog) {\r\n          let match;\r\n          while ((match = GLSL_ERROR_PATTERN.exec(errorLog))) {\r\n            errors.push({\r\n              errorLine: parseInt(match[1], 10) - 1,\r\n              // Subtract 1 from errorLine since first index becomes 1.\r\n              type: 4,\r\n              message: match[2]\r\n            });\r\n          }\r\n        }\r\n\r\n        if (type === gl.FRAGMENT_SHADER) {\r\n          this.$emit(\"onErrorLineUpdated\", errors);\r\n        }\r\n\r\n        gl.deleteShader(shader);\r\n        return null;\r\n      }\r\n\r\n      // When errors are fixed\r\n      if (this.hasError) {\r\n        if (type === gl.FRAGMENT_SHADER) {\r\n          this.$emit(\"onErrorLineUpdated\", []);\r\n        }\r\n      }\r\n\r\n      return shader;\r\n    },\r\n    // added for testing image loading from store\r\n    updateTextures(gl) {\r\n      this.texturePromises = {};\r\n      this.loadTextures(gl, this.activeExternalResources);\r\n    },\r\n    loadTextures(gl, externalResource) {\r\n      // if (env.isLocal()) {\r\n      //   console.log(\"loading textures\");\r\n      //   console.log(externalResources);\r\n      // }\r\n      this.activeTextures = [];\r\n      // externalResources.forEach((externalResource, index) => {\r\n      //   if (externalResource.id === \"\") {\r\n      //     this.loadBlankTexture(gl, index);\r\n      //   } else {\r\n      //     this.loadTexture(gl, externalResource, index);\r\n      //   }\r\n      // });\r\n      if (!externalResource) {\r\n        this.loadBlankTexture(gl, 0);\r\n      } else {\r\n        this.loadTexture(gl, externalResource, 0);\r\n      }\r\n    },\r\n    loadBlankTexture(gl, index) {\r\n      if (!gl) {\r\n        return;\r\n      }\r\n      const texture = gl.createTexture();\r\n      gl.bindTexture(gl.TEXTURE_2D, texture);\r\n\r\n      gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, true);\r\n\r\n      const level = 0;\r\n      const internalFormat = gl.RGBA;\r\n      const width = 1;\r\n      const height = 1;\r\n      const border = 0;\r\n      const srcFormat = gl.RGBA;\r\n      const srcType = gl.UNSIGNED_BYTE;\r\n      const pixel = new Uint8Array([0, 0, 55, 255]); // blank texture is currently dark-blue, open to change\r\n\r\n      const size = {\r\n        width: 1,\r\n        height: 1\r\n      };\r\n\r\n      gl.texImage2D(\r\n        gl.TEXTURE_2D,\r\n        level,\r\n        internalFormat,\r\n        width,\r\n        height,\r\n        border,\r\n        srcFormat,\r\n        srcType,\r\n        pixel\r\n      );\r\n\r\n      if (texture) {\r\n        this.activeTextures[index] = {\r\n          texture,\r\n          size\r\n        };\r\n      }\r\n    },\r\n    // liberal use of https://docs.w3cub.com/dom/webgl_api/tutorial/using_textures_in_webgl/\r\n    loadTexture(gl, externalResource, index) {\r\n      if (!gl) {\r\n        return;\r\n      }\r\n\r\n      const url = externalResource;\r\n\r\n      console.log(\"loading texture\", url);\r\n\r\n      const texture = gl.createTexture();\r\n      gl.bindTexture(gl.TEXTURE_2D, texture);\r\n\r\n      gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, true);\r\n\r\n      const level = 0;\r\n      const internalFormat = gl.RGBA;\r\n      const width = 1;\r\n      const height = 1;\r\n      const border = 0;\r\n      const srcFormat = gl.RGBA;\r\n      const srcType = gl.UNSIGNED_BYTE;\r\n      const pixel = new Uint8Array([0, 0, 55, 255]); // opaque blue\r\n      gl.texImage2D(\r\n        gl.TEXTURE_2D,\r\n        level,\r\n        internalFormat,\r\n        width,\r\n        height,\r\n        border,\r\n        srcFormat,\r\n        srcType,\r\n        pixel\r\n      );\r\n\r\n      const image = new Image();\r\n      image.crossOrigin = \"Anonymous\";\r\n      image.src = url;\r\n\r\n      const initalSize = {\r\n        width: 1,\r\n        height: 1\r\n      };\r\n\r\n      if (texture) {\r\n        this.activeTextures[index] = {\r\n          texture,\r\n          size: initalSize\r\n        };\r\n      }\r\n\r\n      this.texturePromises[`key_${index}`] = new Promise(\r\n        (resolve, reject) => {\r\n          image.onload = () => {\r\n            gl.bindTexture(gl.TEXTURE_2D, texture);\r\n            gl.texImage2D(\r\n              gl.TEXTURE_2D,\r\n              level,\r\n              internalFormat,\r\n              srcFormat,\r\n              srcType,\r\n              image\r\n            );\r\n\r\n            gl.texParameteri(\r\n              gl.TEXTURE_2D,\r\n              gl.TEXTURE_WRAP_S,\r\n              gl.CLAMP_TO_EDGE\r\n            );\r\n            gl.texParameteri(\r\n              gl.TEXTURE_2D,\r\n              gl.TEXTURE_WRAP_T,\r\n              gl.CLAMP_TO_EDGE\r\n            );\r\n            gl.texParameteri(\r\n              gl.TEXTURE_2D,\r\n              gl.TEXTURE_MAG_FILTER,\r\n              gl.NEAREST\r\n            );\r\n            gl.texParameteri(\r\n              gl.TEXTURE_2D,\r\n              gl.TEXTURE_MIN_FILTER,\r\n              gl.NEAREST\r\n            );\r\n\r\n            gl.texParameteri(\r\n              gl.TEXTURE_2D,\r\n              gl.TEXTURE_MIN_FILTER,\r\n              gl.LINEAR\r\n            );\r\n\r\n            this.activeTextures[index].size = {\r\n              width: image.width,\r\n              height: image.height\r\n            };\r\n\r\n            resolve(index);\r\n          };\r\n\r\n          image.onerror = error => {\r\n            // snotifyProvider.error(\r\n            //   this.$snotify,\r\n            //   \"one of the textures could not be loaded\"\r\n            // );\r\n            reject(error);\r\n          };\r\n        }\r\n      );\r\n\r\n      gl.bindTexture(gl.TEXTURE_2D, null);\r\n    },\r\n    createProgram(gl, vertexShader, fragmentShader) {\r\n      const program = gl.createProgram();\r\n\r\n      if (!program) {\r\n        console.log(\"WebGLProgram is null.\");\r\n        return null;\r\n      }\r\n\r\n      gl.attachShader(program, vertexShader);\r\n      gl.attachShader(program, fragmentShader);\r\n\r\n      gl.linkProgram(program);\r\n\r\n      const success = gl.getProgramParameter(program, gl.LINK_STATUS);\r\n\r\n      if (!success) {\r\n        console.log(gl.getProgramInfoLog(program));\r\n        gl.deleteProgram(program);\r\n        return null;\r\n      }\r\n\r\n      return program;\r\n    },\r\n    createFramebufferTarget(gl, width, height) {\r\n      const target = {\r\n        framebuffer: gl.createFramebuffer(),\r\n        renderbuffer: gl.createRenderbuffer(),\r\n        texture: gl.createTexture()\r\n      };\r\n\r\n      // set up framebuffer\r\n      gl.bindTexture(gl.TEXTURE_2D, target.texture);\r\n      gl.texImage2D(\r\n        gl.TEXTURE_2D,\r\n        0,\r\n        gl.RGBA,\r\n        width,\r\n        height,\r\n        0,\r\n        gl.RGBA,\r\n        gl.UNSIGNED_BYTE,\r\n        null\r\n      );\r\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\r\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\r\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\r\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\r\n      gl.bindFramebuffer(gl.FRAMEBUFFER, target.framebuffer);\r\n      gl.framebufferTexture2D(\r\n        gl.FRAMEBUFFER,\r\n        gl.COLOR_ATTACHMENT0,\r\n        gl.TEXTURE_2D,\r\n        target.texture,\r\n        0\r\n      );\r\n\r\n      // set up renderbuffer\r\n      gl.bindRenderbuffer(gl.RENDERBUFFER, target.renderbuffer);\r\n      gl.renderbufferStorage(\r\n        gl.RENDERBUFFER,\r\n        gl.DEPTH_COMPONENT16,\r\n        width,\r\n        height\r\n      );\r\n      gl.framebufferRenderbuffer(\r\n        gl.FRAMEBUFFER,\r\n        gl.DEPTH_ATTACHMENT,\r\n        gl.RENDERBUFFER,\r\n        target.renderbuffer\r\n      );\r\n\r\n      // clean up\r\n      gl.bindTexture(gl.TEXTURE_2D, null);\r\n      gl.bindRenderbuffer(gl.RENDERBUFFER, null);\r\n      gl.bindFramebuffer(gl.FRAMEBUFFER, null);\r\n\r\n      return target;\r\n    },\r\n    createRenderTargets(gl) {\r\n      this.frontTarget = this.createFramebufferTarget(\r\n        gl,\r\n        this.canvasWidth,\r\n        this.canvasHeight\r\n      );\r\n      this.backTarget = this.createFramebufferTarget(\r\n        gl,\r\n        this.canvasWidth,\r\n        this.canvasHeight\r\n      );\r\n    },\r\n    compileScreenProgram(gl) {\r\n      const program = gl.createProgram();\r\n      const vs = this.createShader(gl, gl.VERTEX_SHADER, this.v);\r\n      const fs = this.createShader(gl, gl.FRAGMENT_SHADER, this.f);\r\n\r\n      if (program && vs && fs) {\r\n        gl.attachShader(program, vs);\r\n        gl.attachShader(program, fs);\r\n        gl.deleteShader(vs);\r\n        gl.deleteShader(fs);\r\n        gl.linkProgram(program);\r\n\r\n        if (!gl.getProgramParameter(program, gl.LINK_STATUS)) {\r\n          console.log(\r\n            \"VALIDATE_STATUS: \" +\r\n            gl.getProgramParameter(program, gl.VALIDATE_STATUS),\r\n            \"ERROR: \" + gl.getError()\r\n          );\r\n          return;\r\n        }\r\n        this.screenProgram = program;\r\n\r\n        gl.useProgram(this.screenProgram);\r\n        this.screenPositionAttributeLocation = gl.getAttribLocation(\r\n          this.screenProgram,\r\n          \"position\"\r\n        );\r\n        gl.enableVertexAttribArray(this.screenPositionAttributeLocation);\r\n      }\r\n    },\r\n    onMousemove(e) {\r\n      if (!this.canvas) {\r\n        return;\r\n      }\r\n      const rect = this.canvas.getBoundingClientRect();\r\n      const root = document.documentElement;\r\n      if (root) {\r\n        const left = rect.top + root.scrollLeft;\r\n        const top = rect.top + root.scrollTop;\r\n        this.mouse.x = (e.pageX - left) / this.size.width;\r\n        this.mouse.y = 1 - (e.pageY - top) / this.size.height;\r\n      }\r\n    },\r\n    onWebglcontextlost(event) {\r\n      console.log(\"onWebglcontextlost\");\r\n\r\n      event.preventDefault();\r\n      this.stopAnimate();\r\n    },\r\n    onWebglcontextrestored() {\r\n      console.log(\"onWebglcontextrestored\");\r\n\r\n      this.initGLSLCanvas();\r\n      this.animate();\r\n    }\r\n  },\r\n  computed: {\r\n    canvas() {\r\n      return this.$refs.canvas\r\n    },\r\n    canvasWidth() {\r\n      return this.size.width / this.quality\r\n    },\r\n    canvasHeight() {\r\n      return this.size.height / this.quality\r\n    }\r\n  },\r\n  watch: {\r\n    vertexShader() {\r\n      this.currentProgram = null\r\n    },\r\n    fragmentShader() {\r\n      this.currentProgram = null\r\n    },\r\n    activeExternalResources() {\r\n      this.currentProgram = null\r\n    },\r\n    size() {\r\n      this.createRenderTargets(this.getGL());\r\n    },\r\n    quality() {\r\n      this.createRenderTargets(this.getGL());\r\n    }\r\n  },\r\n  mounted() {\r\n    this.initGLSLCanvas();\r\n\r\n    window.addEventListener(\"mousemove\", this.onMousemove);\r\n\r\n    // webglcontextlost error is often thrown on only Safari.\r\n    // https://www.khronos.org/webgl/wiki/HandlingContextLost\r\n    this.canvas.addEventListener(\r\n      \"webglcontextlost\",\r\n      this.onWebglcontextlost,\r\n      false\r\n    );\r\n    this.canvas.addEventListener(\r\n      \"webglcontextrestored\",\r\n      this.onWebglcontextrestored,\r\n      false\r\n    );\r\n\r\n    this.animate();\r\n  },\r\n  beforeDestroy() {\r\n    window.removeEventListener(\"mousemove\", this.onMousemove);\r\n\r\n    this.stopAnimate();\r\n  }\r\n}\r\n</script>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GLSLCanvas.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GLSLCanvas.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./GLSLCanvas.vue?vue&type=template&id=c815bfd2&\"\nimport script from \"./GLSLCanvas.vue?vue&type=script&lang=js&\"\nexport * from \"./GLSLCanvas.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div class=\"glslCanvasContainer\" ref=\"glslCanvasContainer\">\n    <GLSLCanvas :size=\"canvasSize\"\n                :vertex-shader=\"vertexShader\"\n                :fragment-shader=\"fragmentShader\"\n                :active-external-resources=\"currentImage\"\n                :quality=\"2\" />\n  </div>\n</template>\n\nimport GLSLCanvas from \"@/components/GLSLCanvas\"\n\n<script>\nimport GLSLCanvas from \"@/components/GLSLCanvas\"\n\nconst VERTEX_SHADER_SOURCE = `attribute vec4 position;\nvoid main() {\n    gl_Position = position;\n}`\n\nconst FRAGMENT_SHADER_SOURCE = `precision highp float;\n\nuniform vec2 resolution;\nuniform float time;\nuniform vec2 mouse;\nuniform sampler2D backbuffer;\nuniform sampler2D channel0;\nuniform vec2 channelSize0;\n\n#define PI 3.14159265\n\nvec3 permute(vec3 x) { return mod(((x*34.0)+1.0)*x, 289.0); }\n\nfloat snoise(vec2 v){\n  const vec4 C = vec4(0.211324865405187, 0.366025403784439,\n           -0.577350269189626, 0.024390243902439);\n  vec2 i  = floor(v + dot(v, C.yy) );\n  vec2 x0 = v -   i + dot(i, C.xx);\n  vec2 i1;\n  i1 = (x0.x > x0.y) ? vec2(1.0, 0.0) : vec2(0.0, 1.0);\n  vec4 x12 = x0.xyxy + C.xxzz;\n  x12.xy -= i1;\n  i = mod(i, 289.0);\n  vec3 p = permute( permute( i.y + vec3(0.0, i1.y, 1.0 ))\n  + i.x + vec3(0.0, i1.x, 1.0 ));\n  vec3 m = max(0.5 - vec3(dot(x0,x0), dot(x12.xy,x12.xy),\n    dot(x12.zw,x12.zw)), 0.0);\n  m = m*m ;\n  m = m*m ;\n  vec3 x = 2.0 * fract(p * C.www) - 1.0;\n  vec3 h = abs(x) - 0.5;\n  vec3 ox = floor(x + 0.5);\n  vec3 a0 = x - ox;\n  m *= 1.79284291400159 - 0.85373472095314 * ( a0*a0 + h*h );\n  vec3 g;\n  g.x  = a0.x  * x0.x  + h.x  * x0.y;\n  g.yz = a0.yz * x12.xz + h.yz * x12.yw;\n  return 130.0 * dot(m, g);\n}\n\nvoid main(void) {\n    vec2 uv = (gl_FragCoord.xy * 2.0 - resolution.xy) / min(resolution.x, resolution.y);\n    float f = fract(length(uv * 2.1 * fract(time * 0.1)*0.01));\n\n    float l = 10.0 * (length(floor(uv * 15.0) / 15.0) - time);\n    l = 1.0 * (length(uv) - time * 0.1);\n\n    uv = gl_FragCoord.xy / resolution.xy;\n\n    vec2 ratio = vec2(\n      min((resolution.x / resolution.y) / (channelSize0.x / channelSize0.y), 1.0),\n      min((resolution.y / resolution.x) / (channelSize0.y / channelSize0.x), 1.0)\n    );\n\n    uv = vec2(\n      uv.x * ratio.x + (1.0 - ratio.x) * 0.5,\n      uv.y * ratio.y + (1.0 - ratio.y) * 0.5\n    );\n\n    uv = mix(uv, uv * sin(l / 0.2 * PI), 0.14);\n\n    vec3 color = texture2D(channel0, uv).xyz;\n    color.b = 1.0;\n\n    gl_FragColor = vec4(color, 1.0);\n}`\n\nexport default {\n  name: 'GLSLCanvasContainer',\n  components: {GLSLCanvas},\n  props: {\n    images: Array\n  },\n  data() {\n    return {\n      index: 0,\n      canvasWidth: 0,\n      canvasHeight: 0\n    }\n  },\n  mounted() {\n    window.addEventListener(\"resize\", this.onWindowResized)\n    this.onWindowResized()\n\n    setInterval(() => {\n      this.index++\n      if (this.index >= this.images.length) {\n        this.index = 0\n      }\n    }, 5000)\n  },\n  beforeDestroy() {\n    window.removeEventListener(\"resize\", this.onWindowResized)\n  },\n  computed: {\n    currentImage() {\n      if (this.images.length === 0) {\n        return \"\"\n      }\n      return this.images[this.index]\n    },\n    canvasSize() {\n      return {\n        width: this.canvasWidth,\n        height: this.canvasHeight\n      }\n    },\n    vertexShader() {\n      return VERTEX_SHADER_SOURCE\n    },\n    fragmentShader() {\n      return FRAGMENT_SHADER_SOURCE\n    }\n  },\n  methods: {\n    onWindowResized() {\n      this.canvasWidth = this.$refs.glslCanvasContainer.clientWidth\n      this.canvasHeight = this.$refs.glslCanvasContainer.clientHeight\n    }\n  }\n}\n</script>\n\n<style scoped lang=\"stylus\">\n.glslCanvasContainer\n  width 100%\n  height 100%\n\n  .glslCanvas\n    width 100%\n    height 100%\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GLSLCanvasContainer.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GLSLCanvasContainer.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./GLSLCanvasContainer.vue?vue&type=template&id=2f5af11c&scoped=true&\"\nimport script from \"./GLSLCanvasContainer.vue?vue&type=script&lang=js&\"\nexport * from \"./GLSLCanvasContainer.vue?vue&type=script&lang=js&\"\nimport style0 from \"./GLSLCanvasContainer.vue?vue&type=style&index=0&id=2f5af11c&scoped=true&lang=stylus&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2f5af11c\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div id=\"app\" class=\"app\">\n    <Images v-if=\"false\" :items=\"items\" />\n    <GLSLCanvasContainer :images=\"items\" />\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\"\nimport Images from \"@/components/Images\"\nimport GLSLCanvasContainer from \"@/components/GLSLCanvasContainer\"\n\nconst REQUEST_COUNT = 1\n\nexport default {\n  name: 'App',\n  components: {GLSLCanvasContainer, Images},\n  data() {\n    return {\n      items: [\n        \"image/img_1.jpg\",\n        \"image/img_2.jpg\",\n        // \"https://image.rakuten.co.jp/kabegamiharuko/cabinet/prod_img/pc/ss16656_02.jpg\",\n        // \"https://storage.tenki.jp/storage/static-images/suppl/article/image/2/28/281/28114/1/large.jpg\",\n        // \"https://panasonic.jp/life/air/170044/img/main_sp.jpg\",\n        // \"https://images-na.ssl-images-amazon.com/images/I/51dElM+s1qL._SX335_BO1,204,203,200_.jpg\",\n        // \"https://media-01.creema.net/user/178849/exhibits/2955370/1_18c26a010f8af7421f88feb35f0b7418_500.jpg\",\n        // \"https://images-na.ssl-images-amazon.com/images/I/41957T4S8ZL._SX331_BO1,204,203,200_.jpg\",\n        // \"https://www.ehonnavi.net/img/cover/500/500_Ehon_81725.jpg\",\n        // \"https://thumb.photo-ac.com/25/254267b4eba0281ffa5585b011a3b1b4_t.jpeg\",\n        // \"https://media-01.creema.net/user/461409/exhibits/8181395/0_4d97f70fc23275b9ca6ac2d0befb6609_500.jpg\",\n        // \"https://www.cinra.net/uploads/img/news/2020/20200902-soranisumu_full.jpg\"\n      ],\n      fetchCount: 0\n    }\n  },\n  methods: {\n    async startFetchItems() {\n      await this.fetchItems()\n\n      if (this.fetchCount < REQUEST_COUNT) {\n        setTimeout(() => this.startFetchItems(), 2000)\n      }\n    },\n    async fetchItems() {\n      const apiKey = process.env.VUE_APP_API_API_KEY\n      const searchEngineId = process.env.VUE_APP_SEARCH_ENGINE_ID\n      const query = \"空\"\n      const count = 10  // maximum number is 10.\n      const start = this.items.length > 0 ? this.items.length + 1 : 0\n      const color = \"blue\"\n      const size = \"LARGE\"\n      const lr = \"lang_ja\"\n\n      const response = await axios.get(\n        `${process.env.VUE_APP_API_ENDPOINT}?key=${apiKey}&cx=${searchEngineId}&q=${query}&searchType=image&num=${count}&imgDominantColor=${color}&imgSize=${size}&imgColorType=color&start=${start}&lr=${lr}`\n      )\n      const _items = response.data.items.map(item => {\n        return item.link\n      })\n\n      this.items.push(..._items)\n      this.fetchCount++\n    },\n  }\n}\n</script>\n\n<style lang=\"stylus\">\n@require \"~@/assets/style/common\"\n\n.app\n  width 100%\n  height 100%\n  position fixed\n</style>\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=1c3b75f5&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=stylus&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue'\nimport App from './App.vue'\n\nVue.config.productionTip = false\n\nnew Vue({\n  render: h => h(App),\n}).$mount('#app')\n","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=stylus&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Images.vue?vue&type=style&index=0&id=0152c0c5&scoped=true&lang=stylus&\""],"sourceRoot":""}